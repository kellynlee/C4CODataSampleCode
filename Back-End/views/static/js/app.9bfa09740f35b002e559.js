webpackJsonp([1],{"0Y+k":function(t,e){},"43+t":function(t,e){},"48zv":function(t,e){},E51W:function(t,e){},GE9d:function(t,e){},jHeF:function(t,e){},lD31:function(t,e){},lVK7:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("7+uW"),o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"app"},[e("div",{staticClass:"content"},[e("router-view")],1)])},staticRenderFns:[]};var n=i("VU/8")({data:function(){return{}}},o,!1,function(t){i("lD31")},null,null).exports,a=i("/ocq"),l=i("g4PW"),c=i.n(l),u=i("SHZo"),r=(i("OMJi"),{data:function(){return{form:{title:"",description:"",serialID:"",priority:"",date:""},Submit:"Submit",isSubmit:!1,validateRules:[{validate:function(t){return!!t},message:"Please input Title"}]}},computed:{wxCode:function(){return this.$route.query.code}},methods:{submitTicket:function(){var t=this,e=this,i=c()("production","production");if(this.form.title){var s=this.$loading();this.openID.then(function(o){t.$axios({url:t.CONFIG.url.createTicket,data:{openID:o,Name:t.form.title,Description:t.form.description,SerialID:t.form.serialID,ServicePriorityCode:t.form.priority,OnSiteArrivalDateTime:t.form.date},method:"post"}).then(function(t){console.log(t),s.close(),200==t.status&&(e.isSubmit=!1,e.$toast.success("Create Successfully"),i&&u.a.ready(function(){u.a.closeWindow()}))})})}else this.$alert()},cancelInput:function(){this.form={title:"",description:"",serialID:"",priority:"",date:""}}},mounted:function(){this.$axios({method:"post",url:this.CONFIG.url.wxConfig,data:{url:location.href.split("#")[0]}}).then(function(t){console.log(t.data),u.a.config({debug:!0,appId:t.data.appId,timestamp:t.data.timestamp,nonceStr:t.data.nonceStr,signature:t.data.signature,jsApiList:["closeWindow"]})}),this.openID=this.common.getOpenID(this.wxCode)}}),m={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"mainContent"},[i("mu-form",{attrs:{model:t.form}},[i("mu-form-item",{attrs:{label:"*Title",prop:"title",rules:t.validateRules}},[i("mu-text-field",{model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),i("mu-form-item",{attrs:{label:"Problem Description",prop:"description"}},[i("mu-text-field",{model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),t._v(" "),i("mu-form-item",{attrs:{label:"SerialID",prop:"serialID"}},[i("mu-text-field",{model:{value:t.form.serialID,callback:function(e){t.$set(t.form,"serialID",e)},expression:"form.serialID"}})],1),t._v(" "),i("mu-form-item",{attrs:{label:"Priority",prop:"priority"}},[i("mu-text-field",{model:{value:t.form.priority,callback:function(e){t.$set(t.form,"priority",e)},expression:"form.priority"}})],1),t._v(" "),i("mu-form-item",{attrs:{label:"Request on-site Date",prop:"date"}},[i("mu-date-input",{attrs:{type:"dateTime"},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}})],1),t._v(" "),i("mu-form-item",[i("mu-button",{staticClass:"button",attrs:{color:"primary"},on:{click:t.submitTicket}},[t._v(t._s(t.Submit))]),t._v(" "),i("mu-button",{staticClass:"button",on:{click:t.cancelInput}},[t._v("Cancel")])],1)],1)],1)},staticRenderFns:[]};var d=i("VU/8")(r,m,!1,function(t){i("43+t")},"data-v-2ff6135e",null).exports,p={data:function(){return{inputValidator:[{validate:function(t){return!!t},message:"Please input phone number"}],formData:{phone:""},contactList:[],selectedContact:"",isClick:!1,isSelected:!1,isQuery:!0,contactDetail:{},isLinked:!1}},computed:{wxCode:function(){return this.$route.query.code}},methods:{onSelect:function(){this.isSelected=!0},submitData:function(){var t=this,e=this,i=(this.CONFIG.Url,/^[0-9]*$/);this.$refs.form.validate().then(function(s){s?i.test(e.formData.phone)?e.formData.phone.length<11?e.$alert("Please input valid phone number"):e.$confirm("Confirm your information?","Confirm").then(function(i){if(i.result){var s=t.$loading();e.isQuery=!0,t.openID.then(function(i){e.$axios({method:"post",url:t.CONFIG.url.getContactCollection,data:{openID:i,phone:t.formData.phone}}).then(function(t){e.isQuery=!1,s.close(),console.log(t),t.data.isCreated?e.$toast.success("Success"):t.data.d.results.length>0?(e.$toast.success("Success"),e.contactList=t.data.d.results.concat()):e.$toast.error("No Contact Found")})})}}):e.$alert("Please input number","Alert"):e.$alert("Please input phone","Alert")})},createBP:function(){var t=this,e=this,i=this.selectedContact.ObjectID.slice(0,8)+"-"+this.selectedContact.ObjectID.slice(8,12)+"-"+this.selectedContact.ObjectID.slice(12,16)+"-"+this.selectedContact.ObjectID.slice(16,20)+"-"+this.selectedContact.ObjectID.slice(20,this.selectedContact.ObjectID.length);this.openID.then(function(s){t.$axios({url:t.CONFIG.url.createBP,method:"post",data:{UUID:i,openID:s}}).then(function(i){t.$toast.success("Create Successfully"),e.isSelected=!1})})},cancelInput:function(){this.formData.phone=""}},mounted:function(){var t=this,e=this.$loading();this.openID=this.common.getOpenID(this.wxCode),this.openID.then(function(i){t.$axios({method:"post",url:t.CONFIG.url.getSMUP,data:{openID:i}}).then(function(i){e.close(),i.data&&(t.contactDetail=i.data,t.isLinked=!0)})})}},v={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"mainBody"},[t.isLinked?t._e():i("div",[i("mu-form",{ref:"form",attrs:{model:t.formData,"label-width":80}},[i("mu-form-item",{attrs:{prop:"phone",label:"Phone",rules:t.inputValidator}},[i("mu-text-field",{attrs:{prop:"phone"},model:{value:t.formData.phone,callback:function(e){t.$set(t.formData,"phone",e)},expression:"formData.phone"}})],1),t._v(" "),i("mu-form-item",[i("mu-button",{directives:[{name:"loading",rawName:"v-loading",value:t.isClick,expression:"isClick"}],staticClass:"button",attrs:{color:"primary","data-mu-loading-size":"24",disabled:t.isClick},on:{click:t.submitData}},[t._v("Submit")]),t._v(" "),i("mu-button",{staticClass:"button",on:{click:t.cancelInput}},[t._v("Cancel")])],1)],1),t._v(" "),i("mu-paper",{staticClass:"paper",attrs:{"z-depth":4}},[t._l(t.contactList,function(e){return i("mu-flex",{key:e.id,staticClass:"radioContent"},[i("mu-radio",{staticClass:"radio",attrs:{value:e,label:e.FirstName},on:{change:t.onSelect},model:{value:t.selectedContact,callback:function(e){t.selectedContact=e},expression:"selectedContact"}})],1)}),t._v(" "),t.isSelected?i("mu-button",{staticClass:"button",attrs:{color:"primary"},on:{click:t.createBP}},[t._v("Create")]):t._e(),t._v(" "),t.isSelected?i("mu-button",{staticClass:"button"},[t._v("Cancel")]):t._e()],2)],1),t._v(" "),t.isLinked?i("div",[i("mu-list",[i("mu-list-item",[i("mu-list-item-content",[i("mu-list-item-title",[t._v("Your Contact:")])],1)],1),t._v(" "),i("mu-list-item",[i("mu-list-item-content",[i("mu-list-item-title",[t._v("Name:")]),t._v(" "),i("mu-list-item-sub-title",[t._v(t._s(t.contactDetail.Name))])],1)],1),t._v(" "),i("mu-list-item",[i("mu-list-item-content",[i("mu-list-item-title",[t._v("Phone:")]),t._v(" "),i("mu-list-item-sub-title",[t._v(t._s(t.contactDetail.Phone)+"}")])],1)],1)],1)],1):t._e()])},staticRenderFns:[]};var f=i("VU/8")(p,v,!1,function(t){i("zKAX")},"data-v-be6e2b4e",null).exports,_=(Object,{data:function(){return{}},props:{ticket:{type:Object}}}),h={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"item"},[i("mu-flex",{staticClass:"item",attrs:{direction:"column"}},[i("mu-flex",{staticClass:"itemBody",attrs:{fill:"","align-items":"center"}},[i("mu-list",[i("mu-list-item",[i("mu-list-item-content",[t._v("ID")]),t._v(" "),i("mu-list-item-content",[t._v(t._s(t.ticket.ID))])],1)],1)],1),t._v(" "),i("mu-flex",{staticClass:"itemBody",attrs:{fill:"","align-items":"center"}},[i("mu-list",[i("mu-list-item",[i("mu-list-item-content",[t._v("Subject")]),t._v(" "),i("mu-list-item-content",[t._v(t._s(t.ticket.Name))])],1)],1)],1),t._v(" "),i("mu-flex",{staticClass:"itemBody",attrs:{fill:"","align-items":"center"}},[i("mu-list",[i("mu-list-item",[i("mu-list-item-content",[i("mu-badge",{staticClass:"ticketBadge",attrs:{content:t.ticket.ServiceRequestUserLifeCycleStatusCodeText,color:"primary"}})],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var D=i("VU/8")(_,h,!1,function(t){i("jHeF")},"data-v-a3b690ae",null).exports,C={data:function(){return{ticketList:[],loading:!1,key:0}},computed:{wxCode:function(){return this.$route.query.code}},components:{TicketListItem:D},methods:{openTicketDetail:function(t){console.log(t),this.$router.push("/TicketDetail/"+t)},load:function(){var t=this;if(this.ticketList.length<10)return!1;this.loading=!0,this.key+=10,this.$axios({method:"post",url:this.CONFIG.url.getTicketList,data:{key:this.key}}).then(function(e){t.loading=!1,e.data.length>0?t.ticketList=t.ticketList.concat(e.data):t.$toast.error("No more ticket!")})}},mounted:function(){var t=this,e=this.$loading();this.openID=this.common.getOpenID(this.wxCode),this.openID.then(function(i){t.$axios({method:"post",url:t.CONFIG.url.getTicketList,data:{key:t.key,openID:i}}).then(function(i){if(e.close(),0==i.data.length)return t.$toast.error("No ticket found!"),!1;t.ticketList=t.ticketList.concat(i.data)})})}},k={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"mainContent"},[i("div",{staticClass:"listContent"},[i("mu-load-more",{attrs:{loading:t.loading},on:{load:t.load}},t._l(t.ticketList,function(e){return i("div",{key:e.ID},[i("ticket-list-item",{attrs:{ticket:e},nativeOn:{click:function(i){t.openTicketDetail(e.ID)}}})],1)}))],1)])},staticRenderFns:[]};var b=i("VU/8")(C,k,!1,function(t){i("48zv")},"data-v-c7f5f304",null).exports,g={data:function(){return{ticketDetail:{ServiceRequestLocation:{}},isEnable:!0,openDialog:!1,msg:""}},computed:{ticketID:function(){return this.$route.params.id},wxCode:function(){return this.$route.query.code}},methods:{backToList:function(){this.$router.push("/TicketList")},open:function(){this.openDialog=!0},replyMsg:function(){var t=this,e=this.$loading();this.msg.length>0&&this.openID.then(function(i){t.$axios({method:"post",url:t.CONFIG.url.replyMsg,data:{openID:i,msg:t.msg,ID:t.ticketDetail.SocialMediaActivityID}}).then(function(i){e.close(),200==i.status?(t.openDialog=!1,t.$toast.success("Reply successfully!")):(t.openDialog=!1,t.$toast.error("Reply Failed!"))})})},cancel:function(){this.openDialog=!1,this.msg=""}},mounted:function(){var t=this,e=this.$loading();this.openID=this.common.getOpenID(this.wxCode),this.$axios({method:"post",url:this.CONFIG.url.getTicket,data:{ID:this.ticketID}}).then(function(i){e.close(),console.log(i.data),200==i.status&&(t.ticketDetail=i.data)})}},y={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"mainContent"},[i("div",{staticClass:"listContent"},[i("mu-list",{attrs:{textline:"two-line"}},[i("mu-list-item",[i("mu-list-item-content",[i("mu-list-item-title",[t._v("Subject")]),t._v(" "),i("mu-list-item-sub-title",[t._v(t._s(t.ticketDetail.Name))])],1)],1),t._v(" "),i("mu-list-item",[i("mu-list-item-content",[i("mu-list-item-title",[t._v("Account")]),t._v(" "),i("mu-list-item-sub-title",[t._v(t._s(t.ticketDetail.BuyerPartyName))])],1)],1),t._v(" "),i("mu-list-item",[i("mu-list-item-content",[i("mu-list-item-title",[t._v("Contact/Individual Customer")]),t._v(" "),i("mu-list-item-sub-title",[t._v(t._s(t.ticketDetail.BuyerMainContactPartyName))])],1)],1),t._v(" "),i("mu-list-item",[i("mu-list-item-content",[i("mu-list-item-title",[t._v("Description")]),t._v(" "),i("mu-list-item-sub-title",[t._v(t._s(t.ticketDetail.Name))])],1)],1),t._v(" "),i("mu-list-item",[i("mu-list-item-content",[i("mu-list-item-title",[t._v("Priority")]),t._v(" "),i("mu-list-item-sub-title",[t._v(t._s(t.ticketDetail.ServicePriorityCodeText))])],1)],1),t._v(" "),i("mu-list-item",[i("mu-list-item-content",[i("mu-list-item-title",[t._v("Status")]),t._v(" "),i("mu-list-item-sub-title",[t._v(t._s(t.ticketDetail.ServiceRequestUserLifeCycleStatusCodeText))])],1)],1),t._v(" "),i("mu-list-item",[i("mu-list-item-content",[i("mu-list-item-title",[t._v("Prosser")]),t._v(" "),i("mu-list-item-sub-title",[t._v(t._s(t.ticketDetail.ProcessorPartyName))])],1)],1),t._v(" "),i("mu-list-item",[i("mu-list-item-content",[i("mu-list-item-title",[t._v("Product Description")]),t._v(" "),i("mu-list-item-sub-title",[t._v(t._s(t.ticketDetail.ProductDescription))])],1)],1),t._v(" "),i("mu-list-item",[i("mu-list-item-content",[i("mu-list-item-title",[t._v("Product SerialID")]),t._v(" "),i("mu-list-item-sub-title",[t._v(t._s(t.ticketDetail.SerialID))])],1)],1),t._v(" "),i("mu-list-item",[i("mu-list-item-content",[i("mu-list-item-title",[t._v("Warranty")]),t._v(" "),i("mu-list-item-sub-title",[t._v(t._s(t.ticketDetail.WarrantyGoodwillCode))])],1)],1),t._v(" "),i("mu-list-item",[i("mu-list-item-content",[i("mu-list-item-title",[t._v("WarrantyDate: ")]),t._v(" "),i("mu-list-item-sub-title",[t._v(t._s(t.ticketDetail.WarrantyStartdatetimeContent))])],1)],1),t._v(" "),i("mu-list-item",[i("mu-list-item-content",[i("mu-list-item-title",[t._v("ServiceTechnician:")]),t._v(" "),i("mu-list-item-sub-title",[t._v(t._s(t.ticketDetail.ServicePerformerPartyName))])],1)],1),t._v(" "),i("mu-list-item",[i("mu-list-item-content",[i("mu-list-item-title",[t._v("Country: ")]),t._v(" "),i("mu-list-item-sub-title",[t._v(t._s(t.ticketDetail.ServiceRequestLocation.CountryText))])],1)],1),t._v(" "),i("mu-list-item",[i("mu-list-item-content",[i("mu-list-item-title",[t._v("Street: ")]),t._v(" "),i("mu-list-item-sub-title",[t._v(t._s(t.ticketDetail.ServiceRequestLocation.Street))])],1)],1),t._v(" "),i("mu-list-item",[i("mu-list-item-content",[i("mu-list-item-title",[t._v("HouseNumber: "+t._s(t.ticketDetail.ServiceRequestLocation.HouseNumber))]),t._v(" "),i("mu-list-item-sub-title")],1)],1),t._v(" "),i("mu-list-item",[i("mu-list-item-content",[i("mu-list-item-title",[t._v("City: ")]),t._v(" "),i("mu-list-item-sub-title",[t._v(t._s(t.ticketDetail.ServiceRequestLocation.City))])],1)],1),t._v(" "),i("mu-list-item",[i("mu-list-item-content",[i("mu-list-item-title",[t._v("State: ")]),t._v(" "),i("mu-list-item-sub-title",[t._v(t._s(t.ticketDetail.ServiceRequestLocation.State))])],1)],1),t._v(" "),i("mu-list-item",[i("mu-list-item-content",[i("mu-list-item-title",[t._v("Postal: ")]),t._v(" "),i("mu-list-item-sub-title",[t._v(t._s(t.ticketDetail.ServiceRequestLocation.PostalCode))])],1)],1),t._v(" "),i("mu-list-item",[i("mu-list-item-content",[i("mu-list-item-title",[t._v("Requested Start Time:")]),t._v(" "),i("mu-list-item-sub-title",[t._v(t._s(t.ticketDetail.RequestedFulfillmentPeriodStartDateTime))])],1)],1),t._v(" "),i("mu-list-item",[i("mu-list-item-content",[i("mu-list-item-title",[t._v("Requested End Time:")]),t._v(" "),i("mu-list-item-sub-title",[t._v(t._s(t.ticketDetail.RequestedFulfillmentPeriodEndDateTime))])],1)],1)],1),t._v(" "),i("mu-flex",{attrs:{"justify-content":"center","align-item":"center"}},[i("div",{staticClass:"btnBox"},[i("mu-button",{attrs:{round:"",color:"primary",disabled:!t.ticketDetail.isOrigin,"full-width":""},on:{click:t.open}},[t._v("\n                    Reply\n                    "),i("mu-icon",{attrs:{right:"",value:"send"}})],1)],1)]),t._v(" "),i("mu-dialog",{attrs:{title:"Dialog",width:"360",transition:"slide-bottom",fullscreen:"",open:t.openDialog},on:{"update:open":function(e){t.openDialog=e}}},[i("mu-text-field",{attrs:{"multi-line":"",rows:4,icon:"comment",placeholder:"Input Reply Message","full-width":""},model:{value:t.msg,callback:function(e){t.msg=e},expression:"msg"}}),i("br"),t._v(" "),i("mu-button",{attrs:{slot:"actions",flat:"",color:"primary"},on:{click:t.replyMsg},slot:"actions"},[t._v("Reply")]),t._v(" "),i("mu-button",{attrs:{slot:"actions",flat:"",color:"primary"},on:{click:t.cancel},slot:"actions"},[t._v("Cancel")])],1)],1),t._v(" "),i("mu-bottom-nav",{staticClass:"tabBar"},[i("mu-bottom-nav-item",{attrs:{title:"Detail",icon:"details"}}),t._v(" "),i("mu-bottom-nav-item",{attrs:{title:"History",icon:"history"}})],1)],1)},staticRenderFns:[]};var I=i("VU/8")(g,y,!1,function(t){i("GE9d")},"data-v-72768b63",null).exports;s.a.use(a.a);var S=new a.a({mode:"history",routes:[{name:"SocialMediaActivityCreate",path:"/SocialMediaActivityCreate",component:d},{name:"ContactCollection",path:"/ContactCollection",component:f},{name:"TicketList",path:"/TicketList",component:b},{name:"TicketDetail",path:"/TicketDetail/:id",component:I}]}),x=i("mtWM"),$=i.n(x),P=i("aFc6"),T=(i("E51W"),i("1kwf")),L=(i("0Y+k"),i("sXio")),O=i("w7Ps"),w=i("mrgY"),N=i.n(w);const R=i("mrgY"),F=i("mtWM");var q={getOpenID:t=>new Promise((e,i)=>{F({method:"post",url:R.url.getOpenID,data:{code:t}}).then(t=>{e(t.data)})})};s.a.use(P.a),s.a.use(T.a),s.a.use(L.a),s.a.use(O.a),s.a.use(u.a),s.a.config.debug=!0,s.a.config.productionTip=!1,$.a.defaults.baseURL="api/",s.a.prototype.$axios=$.a,s.a.prototype.CONFIG=N.a,s.a.prototype.common=q,new s.a({el:"#app",router:S,template:"<App/>",components:{App:n}})},mrgY:function(t,e,i){const s=Object.is("production","production"),o=s?"https://c4codatasample.cfapps.us10.hana.ondemand.com":"http://localhost:4000",n={createTicket:o+"/createTicket",createBP:o+"/createBP",getContactCollection:o+"/getContactCollection",wxConfig:o+"/wxJssdk/getJssdk",getTicket:o+"/getTicket",getTicketList:o+"/getTicketList",replyMsg:o+"/replyMsg",getSMUP:o+"/getSMUP",getOpenID:o+"/getOpenID"};t.exports={baseUrl:s?"https://c4codatasample.cfapps.us10.hana.ondemand.com":"api/",url:n}},zKAX:function(t,e){}},["lVK7"]);
//# sourceMappingURL=app.9bfa09740f35b002e559.js.map